(window.webpackJsonp=window.webpackJsonp||[]).push([[19,3,4,8,10,11,14],{312:function(t,e,n){"use strict";n.r(e);var r={props:{message:String},methods:{closeNotification:function(){this.$emit("close")}}},o=n(26),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-green-500 text-white p-4 rounded shadow-lg"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})]),t._v(" "),e("span",{staticClass:"font-semibold"},[t._v("Sukses!")])]),t._v(" "),e("button",{staticClass:"text-white hover:text-gray-200 focus:outline-none",on:{click:t.closeNotification}},[e("svg",{staticClass:"w-4 h-4 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])]),t._v(" "),e("p",{staticClass:"mt-2"},[t._v(t._s(t.message))])])}),[],!1,null,null,null);e.default=component.exports},313:function(t,e,n){"use strict";n.r(e);var r={props:{message:String},methods:{closeNotification:function(){this.$emit("close")}}},o=n(26),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-red-500 text-white p-4 rounded shadow-lg"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})]),t._v(" "),e("span",{staticClass:"font-semibold"},[t._v("Gagal!")])]),t._v(" "),e("button",{staticClass:"text-white hover:text-gray-200 focus:outline-none",on:{click:t.closeNotification}},[e("svg",{staticClass:"w-4 h-4 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])]),t._v(" "),e("p",{staticClass:"mt-2"},[t._v(t._s(t.message))])])}),[],!1,null,null,null);e.default=component.exports},315:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{currentYear:(new Date).getFullYear()}}},o=n(26),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center text-gray-500 text-sm my-4"},[t._v("\n  Â© "+t._s(t.currentYear)+"\n  "),e("a",{staticClass:"text-blue-500 hover:underline",attrs:{href:"https://github.com/freakh00da",target:"_blank",rel:"noopener noreferrer"}},[t._v("freakh00da")])])}),[],!1,null,"0b7ddd07",null);e.default=component.exports},321:function(t,e,n){"use strict";n.r(e);var r={},o=n(26),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabs"},[e("nuxt-link",{staticClass:"tab tab-bordered",class:{"tab-active":"/friends"===t.$route.path},attrs:{to:"/friends"}},[t._v("Friends")]),t._v(" "),e("nuxt-link",{staticClass:"tab tab-bordered",class:{"tab-active":"/dashboard"===t.$route.path},attrs:{to:"/dashboard"}},[t._v("Dashboard")])],1)}),[],!1,null,null,null);e.default=component.exports},327:function(t,e,n){"use strict";n.r(e);var r=n(8),o=(n(27),{data:function(){return{friends:[]}},methods:{getFriends:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("id"),r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3ZGt1cGN3aWdtaHZuaHZ2bmxnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY5NDY4NTUwOCwiZXhwIjoyMDEwMjYxNTA4fQ.e7H4hKzuXT_STOyk0Rd4urDJsgN7bdtZlsjW46GsRKQ",e.prev=2,e.next=5,t.$axios.get("/v1/friends?id=eq.".concat(n),{headers:{apikey:r,Authorization:"Bearer ".concat(r)}});case 5:200===(o=e.sent).status?t.friends=o.data:console.error("Error:",o.error),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFriends();case 2:case"end":return e.stop()}}),e)})))()}}),c=n(26),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-x-auto"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.friends,(function(n){return e("tr",{key:n.id},[e("td",[e("div",{staticClass:"font-bold"},[t._v(t._s(n.username))])]),t._v(" "),e("td",[t._v(t._s(n.email))]),t._v(" "),e("td",[e("nuxt-link",{staticClass:"btn btn-ghost btn-xs",attrs:{to:"/friend/".concat(n.friend_id)}},[t._v("\n            details\n          ")])],1)])})),0)])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Email")]),t._v(" "),e("th")])])}],!1,null,null,null);e.default=component.exports},351:function(t,e,n){"use strict";n.r(e);var r=n(8),o=(n(27),{data:function(){return{email:"",message:"",showSuccessNotification:!1,successMessage:"",showFailedNotification:!1,failedMessage:""}},methods:{openModal:function(){document.getElementById("my_modal_1").showModal()},closeModal:function(){document.getElementById("my_modal_1").close()},sendRequest:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=localStorage.getItem("id"),o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3ZGt1cGN3aWdtaHZuaHZ2bmxnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY5NDY4NTUwOCwiZXhwIjoyMDEwMjYxNTA4fQ.e7H4hKzuXT_STOyk0Rd4urDJsgN7bdtZlsjW46GsRKQ",e.next=5,t.getSender(r,o);case 5:return c=e.sent,e.next=8,t.getId(t.email,o);case 8:l=e.sent,t.$axios.post("/v1/notifications",{email:c.email,message:n,type:"friend-request",id:l,status:"pending",name:c.username,friend_id:r},{headers:{apikey:o,Authorization:"Bearer ".concat(o),"Content-Type":"application/json",Prefer:"return=minimal"}}).then((function(e){console.log("Response:",e.data),t.closeModal(),t.showSuccess("Permintaan pertemanan berhasil dikirim.")})).catch((function(e){console.error("Error:",e),t.showFailed("Gagal mengirim permintaan pertemanan.")}));case 10:case"end":return e.stop()}}),e)})))()},getSender:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$axios.get("/v1/users?id=eq.".concat(t),{headers:{apikey:e,Authorization:"Bearer ".concat(e)}});case 2:return o=r.sent,r.abrupt("return",o.data[0]);case 4:case"end":return r.stop()}}),r)})))()},getId:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$axios.get("v1/users?email=eq.".concat(t),{headers:{apikey:e,Authorization:"Bearer ".concat(e)}});case 2:return o=r.sent,r.abrupt("return",o.data[0].id);case 4:case"end":return r.stop()}}),r)})))()},showSuccess:function(t){this.successMessage=t,this.showSuccessNotification=!0},showFailed:function(t){this.failedMessage=t,this.showFailedNotification=!0}}}),c=n(26),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"btn",on:{click:t.openModal}},[t._v("Add Friend")]),t._v(" "),e("dialog",{staticClass:"modal",attrs:{id:"my_modal_1"}},[e("div",{staticClass:"modal-box"},[e("h3",{staticClass:"font-bold text-lg"},[t._v("Add Friend")]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.sendRequest.apply(null,arguments)}}},[e("div",{staticClass:"py-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"email"}},[t._v("Email:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"py-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"message"}},[t._v("Message:")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300",attrs:{id:"message",rows:"4"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"modal-action"},[e("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Send")]),t._v(" "),e("button",{staticClass:"btn",on:{click:t.closeModal}},[t._v("Close")])])])])]),t._v(" "),t.showSuccessNotification?e("NotificationSuccess",{attrs:{message:t.successMessage},on:{close:function(e){t.showSuccessNotification=!1}}}):t._e(),t._v(" "),t.showFailedNotification?e("NotificationFailed",{attrs:{message:t.failedMessage},on:{close:function(e){t.showFailedNotification=!1}}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{NotificationSuccess:n(312).default,NotificationFailed:n(313).default})},374:function(t,e,n){"use strict";n.r(e);var r=n(321),o=n(327),c={components:{Sidebar:r.default,Friends:o.default},middleware:"checkSession",layout:"navbar"},l=n(26),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex justify-center my-6"},[e("Sidebar")],1),t._v(" "),e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"border-solid border-2 rounded-xl my-10 bg-sky-50 shadow w-3/5"},[e("div",{staticClass:"p-5"},[e("Friends")],1),t._v(" "),e("div",{staticClass:"m-5"},[e("AddFriend")],1),t._v(" "),e("Copyright")],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Sidebar:n(321).default,Friends:n(327).default,AddFriend:n(351).default,Copyright:n(315).default})}}]);