(window.webpackJsonp=window.webpackJsonp||[]).push([[3,10,11],{312:function(t,e,n){"use strict";n.r(e);var o={props:{message:String},methods:{closeNotification:function(){this.$emit("close")}}},r=n(26),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-green-500 text-white p-4 rounded shadow-lg"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})]),t._v(" "),e("span",{staticClass:"font-semibold"},[t._v("Sukses!")])]),t._v(" "),e("button",{staticClass:"text-white hover:text-gray-200 focus:outline-none",on:{click:t.closeNotification}},[e("svg",{staticClass:"w-4 h-4 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])]),t._v(" "),e("p",{staticClass:"mt-2"},[t._v(t._s(t.message))])])}),[],!1,null,null,null);e.default=component.exports},313:function(t,e,n){"use strict";n.r(e);var o={props:{message:String},methods:{closeNotification:function(){this.$emit("close")}}},r=n(26),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-red-500 text-white p-4 rounded shadow-lg"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("svg",{staticClass:"w-6 h-6 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})]),t._v(" "),e("span",{staticClass:"font-semibold"},[t._v("Gagal!")])]),t._v(" "),e("button",{staticClass:"text-white hover:text-gray-200 focus:outline-none",on:{click:t.closeNotification}},[e("svg",{staticClass:"w-4 h-4 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])]),t._v(" "),e("p",{staticClass:"mt-2"},[t._v(t._s(t.message))])])}),[],!1,null,null,null);e.default=component.exports},351:function(t,e,n){"use strict";n.r(e);var o=n(8),r=(n(27),{data:function(){return{email:"",message:"",showSuccessNotification:!1,successMessage:"",showFailedNotification:!1,failedMessage:""}},methods:{openModal:function(){document.getElementById("my_modal_1").showModal()},closeModal:function(){document.getElementById("my_modal_1").close()},sendRequest:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,o=localStorage.getItem("id"),r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3ZGt1cGN3aWdtaHZuaHZ2bmxnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY5NDY4NTUwOCwiZXhwIjoyMDEwMjYxNTA4fQ.e7H4hKzuXT_STOyk0Rd4urDJsgN7bdtZlsjW46GsRKQ",e.next=5,t.getSender(o,r);case 5:return c=e.sent,e.next=8,t.getId(t.email,r);case 8:l=e.sent,t.$axios.post("/v1/notifications",{email:c.email,message:n,type:"friend-request",id:l,status:"pending",name:c.username,friend_id:o},{headers:{apikey:r,Authorization:"Bearer ".concat(r),"Content-Type":"application/json",Prefer:"return=minimal"}}).then((function(e){console.log("Response:",e.data),t.closeModal(),t.showSuccess("Permintaan pertemanan berhasil dikirim.")})).catch((function(e){console.error("Error:",e),t.showFailed("Gagal mengirim permintaan pertemanan.")}));case 10:case"end":return e.stop()}}),e)})))()},getSender:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.$axios.get("/v1/users?id=eq.".concat(t),{headers:{apikey:e,Authorization:"Bearer ".concat(e)}});case 2:return r=o.sent,o.abrupt("return",r.data[0]);case 4:case"end":return o.stop()}}),o)})))()},getId:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.$axios.get("v1/users?email=eq.".concat(t),{headers:{apikey:e,Authorization:"Bearer ".concat(e)}});case 2:return r=o.sent,o.abrupt("return",r.data[0].id);case 4:case"end":return o.stop()}}),o)})))()},showSuccess:function(t){this.successMessage=t,this.showSuccessNotification=!0},showFailed:function(t){this.failedMessage=t,this.showFailedNotification=!0}}}),c=n(26),component=Object(c.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"btn",on:{click:t.openModal}},[t._v("Add Friend")]),t._v(" "),e("dialog",{staticClass:"modal",attrs:{id:"my_modal_1"}},[e("div",{staticClass:"modal-box"},[e("h3",{staticClass:"font-bold text-lg"},[t._v("Add Friend")]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.sendRequest.apply(null,arguments)}}},[e("div",{staticClass:"py-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"email"}},[t._v("Email:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300",attrs:{type:"email",id:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"py-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"message"}},[t._v("Message:")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-300",attrs:{id:"message",rows:"4"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"modal-action"},[e("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Send")]),t._v(" "),e("button",{staticClass:"btn",on:{click:t.closeModal}},[t._v("Close")])])])])]),t._v(" "),t.showSuccessNotification?e("NotificationSuccess",{attrs:{message:t.successMessage},on:{close:function(e){t.showSuccessNotification=!1}}}):t._e(),t._v(" "),t.showFailedNotification?e("NotificationFailed",{attrs:{message:t.failedMessage},on:{close:function(e){t.showFailedNotification=!1}}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{NotificationSuccess:n(312).default,NotificationFailed:n(313).default})}}]);